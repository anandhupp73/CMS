{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{% block title %}Admin Dashboard | CPMS{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- HTMX (for dynamic rendering) -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="bg-slate-50 h-screen overflow-hidden flex flex-col">

    <!-- ================= NAVBAR ================= -->
    <nav class="shrink-0 bg-slate-900 text-white h-16 flex items-center px-6 justify-between border-b border-slate-700">
        <div class="flex items-center gap-3">
            <div class="w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center font-black">
                CM
            </div>
            <span class="font-bold tracking-tight">CMS</span>
        </div>

        <div class="flex items-center gap-4">
            <span class="text-xs text-slate-300 font-medium">Admin</span>
            <a href="{% url 'logout' %}"
                class="text-xs font-bold text-red-400 border border-red-400/30 px-3 py-1.5 rounded-lg hover:bg-red-400/10">
                LOGOUT
            </a>
        </div>
    </nav>

    <!-- ================= LAYOUT ================= -->
    <div class="flex flex-1 overflow-hidden">

        <!-- ========== SIDEBAR ========== -->
        <aside class="w-64 bg-white border-r border-slate-200 shrink-0 pt-6">
            <nav class="px-4 space-y-1">

                <a href="{% url 'admin_dashboard' %}"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium
           {% if request.resolver_match.url_name == 'admin_dashboard' %} bg-indigo-50 text-indigo-600 {% else %} text-slate-500 hover:bg-slate-50 {% endif %}">
                    Dashboard
                </a>

                <a href="{% url 'admin_view_projects' %}"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium
           {% if request.resolver_match.url_name == 'admin_view_projects' %} bg-indigo-50 text-indigo-600 {% else %} text-slate-500 hover:bg-slate-50 {% endif %}">
                    Projects
                </a>

                <a href="{% url 'admin_user_list' %}"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium
           {% if request.resolver_match.url_name == 'admin_user_list' %} bg-indigo-50 text-indigo-600 {% else %} text-slate-500 hover:bg-slate-50 {% endif %}">
                    Users
                </a>

                <a href="#" class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium
           text-slate-500 hover:bg-slate-50">
                    Reports
                </a>

                <a href="#" class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium
           text-slate-500 hover:bg-slate-50">
                    Settings
                </a>
            </nav>
        </aside>


        <!-- ========== MAIN CONTENT ========== -->
        <main class="flex-1 overflow-y-auto no-scrollbar bg-slate-50">
            <!-- ðŸ”´ THIS IS THE ONLY SECTION THAT CHANGES -->
            <section id="dashboard-content" class="p-8">
                {% block content %}

                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-slate-800 tracking-tight">
                        Admin Dashboard
                    </h2>
                    <p class="text-sm text-slate-500 mt-1 font-medium">
                        Construction Project Management System overview
                    </p>
                </div>

                <!-- ================= STATS CARDS ================= -->
                <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-5 gap-6 mb-12">

                    <!-- Total Projects -->
                    <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
                        <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2">
                            Total Projects
                        </p>
                        <h3 class="text-3xl font-extrabold text-slate-800">24</h3>
                        <p class="text-xs text-slate-500 mt-2">18 active â€¢ 6 completed</p>
                    </div>

                    <!-- Active Projects -->
                    <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
                        <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2">
                            Active Projects
                        </p>
                        <h3 class="text-3xl font-extrabold text-slate-800">18</h3>
                        <p class="text-xs text-emerald-600 mt-2 font-bold">
                            â†‘ 12% from last month
                        </p>
                    </div>

                    <!-- Delayed -->
                    <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
                        <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2">
                            Delayed
                        </p>
                        <h3 class="text-3xl font-extrabold text-slate-800">3</h3>
                        <p class="text-xs text-red-600 mt-2 font-bold">
                            Requires attention
                        </p>
                    </div>

                    <!-- Total Budget -->
                    <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
                        <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2">
                            Total Budget
                        </p>
                        <h3 class="text-3xl font-extrabold text-slate-800">$12.5M</h3>
                        <p class="text-xs text-slate-500 mt-2">
                            Across all projects
                        </p>
                    </div>

                    <!-- Spending -->
                    <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
                        <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2">
                            Overall Spending
                        </p>
                        <h3 class="text-3xl font-extrabold text-slate-800">$8.9M</h3>
                        <p class="text-xs text-emerald-600 mt-2 font-bold">
                            71% of total budget
                        </p>
                    </div>

                </div>

                <!-- ================= MAIN CONTENT GRID ================= -->
                <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">

                    <!-- ===== ALERTS ===== -->
                    <div class="space-y-6">
                        <div class="flex items-center justify-between">
                            <h4 class="font-bold text-slate-800 text-sm">Important Alerts</h4>
                            <span class="bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-md font-bold">
                                4
                            </span>
                        </div>

                        <div class="space-y-4">
                            <div class="bg-red-50 border border-red-100 p-5 rounded-2xl">
                                <p class="text-xs font-bold text-red-800">
                                    Harbor Bridge â€“ Phase 3 Delayed
                                    <span class="text-[10px] text-red-400 ml-2">2h ago</span>
                                </p>
                                <p class="text-[11px] text-red-600 mt-2 font-medium leading-relaxed">
                                    Foundation work is two weeks behind schedule due to weather conditions.
                                </p>
                            </div>

                            <div class="bg-red-50 border border-red-100 p-5 rounded-2xl">
                                <p class="text-xs font-bold text-red-800">
                                    5 Invoices Pending Approval
                                    <span class="text-[10px] text-red-400 ml-2">4h ago</span>
                                </p>
                                <p class="text-[11px] text-red-600 mt-2 font-medium leading-relaxed">
                                    Total amount $245,000 requires immediate review.
                                </p>
                            </div>

                            <div class="bg-amber-50 border border-amber-100 p-5 rounded-2xl">
                                <p class="text-xs font-bold text-amber-800">
                                    Downtown Tower â€“ Payment Overdue
                                    <span class="text-[10px] text-amber-400 ml-2">1d ago</span>
                                </p>
                                <p class="text-[11px] text-amber-600 mt-2 font-medium leading-relaxed">
                                    Contractor payment of $85,000 is overdue by five days.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- ===== ACTIVE PROJECTS ===== -->
                    <div class="xl:col-span-2 space-y-6">
                        <h4 class="font-bold text-slate-800 text-sm">Active Projects</h4>

                        <!-- Project Card -->
                        <div class="bg-white border border-slate-200 rounded-3xl p-7 shadow-sm">
                            <div class="flex justify-between items-start mb-6">
                                <div>
                                    <h5 class="font-bold text-slate-800 text-base">
                                        Harbor Bridge Construction
                                    </h5>
                                    <p class="text-xs text-slate-400 mt-1">
                                        John Mitchell â€¢ Jan 2025 â€“ Dec 2026
                                    </p>
                                </div>
                                <span
                                    class="bg-amber-50 text-amber-700 text-[9px] font-bold px-3 py-1 rounded-full uppercase border border-amber-100">
                                    At Risk
                                </span>
                            </div>

                            <div class="space-y-5">
                                <div>
                                    <div
                                        class="flex justify-between text-[10px] font-bold text-slate-400 mb-2 uppercase">
                                        <span>Progress</span>
                                        <span>68%</span>
                                    </div>
                                    <div class="h-2.5 bg-slate-100 rounded-full overflow-hidden">
                                        <div class="h-full bg-slate-800" style="width:68%"></div>
                                    </div>
                                </div>

                                <div>
                                    <div
                                        class="flex justify-between text-[10px] font-bold text-slate-400 mb-2 uppercase">
                                        <span>Budget Usage</span>
                                        <span>$3.2M / $4.5M</span>
                                    </div>
                                    <div class="h-2.5 bg-slate-100 rounded-full overflow-hidden">
                                        <div class="h-full bg-slate-800" style="width:71%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Another Project -->
                        <div class="bg-white border border-slate-200 rounded-3xl p-7 shadow-sm">
                            <div class="flex justify-between items-start mb-6">
                                <div>
                                    <h5 class="font-bold text-slate-800 text-base">
                                        Downtown Commercial Tower
                                    </h5>
                                    <p class="text-xs text-slate-400 mt-1">
                                        Sarah Williams â€¢ Mar 2025 â€“ Mar 2027
                                    </p>
                                </div>
                                <span
                                    class="bg-emerald-50 text-emerald-700 text-[9px] font-bold px-3 py-1 rounded-full uppercase border border-emerald-100">
                                    On Track
                                </span>
                            </div>

                            <div class="h-2.5 bg-slate-100 rounded-full overflow-hidden">
                                <div class="h-full bg-slate-800" style="width:45%"></div>
                            </div>
                        </div>
                    </div>

                </div>

                {% endblock %}
            </section>
        </main>

    </div>

</body>

</html>